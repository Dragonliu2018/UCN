# 第8章 I/O操作的实现

## 01 名词解释

## 02 填空

1. 从用户I/O软件切换到系统I/O软件的唯一途径是**系统调用。**
2. 适合磁盘的I/O控制方式是**DMA方式**。

## 03 计算

### 0x01 磁盘平均存取时间

* **问**：假定一个磁盘的转速为7200RPM，磁盘的平均寻道时间为10ms，内部数据传输率为1MB/s，不考虑排队等待时间。那么读一个512字节扇区的平均时间大约为 \(   ms\)（小数点后保留2位有效数字）
* **答**：**平均存取时间T = 寻道时间 + 旋转等待时间 + 数据传输时间**
  * 寻道时间 = 10ms
  * 旋转等待时间 = 磁盘旋转一圈的时间÷2（因为不知道扇区具体在哪按半圈算）=（60秒）/（2 \* 7200转/分钟）= 4.16...67ms；
  * 数据传输时间 = 传输的字节数/磁盘传输速度= 512B / 1M/s = 0.48828125ms
  * T = 10ms + 4.16...67ms + 0.48828125ms = 14.65ms

### 0x02 磁盘平均响应时间

* **问1**：假设一个程序重复完成将磁盘上一个4KB的数据块读出，进行相应处理后，写回到磁盘的另外一个数据区。各数据块内信息在磁盘上连续存放，数据块随机位于磁盘的一个磁道上。磁盘转速为7200 RPM，最大寻道时间为12ms，磁盘最大内部数据传输率为40MBps，磁盘控制器的开销为2ms，没有其他程序使用磁盘和处理器，并且磁盘读写操作和磁盘数据的处理时间不重叠。若程序对磁盘数据的处理需要20000个时钟周期，处理器时钟频率为500MHz，则磁盘平均响应时间约为（ ms）\(小数点后保留2位有效数字\)
* **答1**：**Disk Response Time= Seek time + Rotational Latency + Transfer time + Controller Time + Queuing Delay**
  * Seek time = 12ms
  * Rotational Latency = 磁盘旋转一圈的时间÷2（因为不知道扇区具体在哪按半圈算）=（60秒）/（2 \* 7200转/分钟）= 4.16...67ms
  * Transfer time  = 传输的字节数/磁盘传输速度= 4KB / 40MBps = 0.09765625ms
  * Controller Time = 2ms
  * T = 12ms + 4.16...67ms + 0.09765625ms + 2ms = 18.27ms
* **问2**：该程序完成一次数据块“读出—处理—写回”操作所需的时间为（ ms）（小数点后保留2位有效数字）
* **答2**：T = 读出时间 + 处理时间 + 写回时间
  * 读出时间 = 写回时间 = 18.27ms
  * 处理时间 = 20000 / 500MHz = 0.04ms
  * T = 18.27ms \* 2 + 0.04ms = 36.58ms



