# 第2章 数据的机器级表示与处理

## 数据表示基础

### **0x01 进制转化**

1. **出题**：$$\frac{2010}{128} 转二进制或十六进制$$ ：2010用到快速转换\(2048 - 38 = 2047 - 37\)得到0111 1101 1010，再除以一个128\( $$2^7$$ \)是小数点向左移动7位得 0111 1.101 1010，转十六进制注意补零得F.B4。
2. R进制转十进制：按权展开
3. 十进制转R进制：整数部分\(除基取余，上右下左\)、小数部分\(乘基取整，上左下右\)
4. 二、八、十六进制相互转化：每三位、四位一转，整数部分从低位到高位，小数部分从高位到低位，注意补0
5. **快速转换\(记住常见的2的幂次\)：** $$2^5= 32，2^6 = 64，2^7 = 128，2^8 = 256，2^9= 512，2^{10} = 1024(KB)，2^{11} = 2048，2^{12} = 4096，2^{13}= 8192，2^{14} = 16384，2^{15} = 32768，2^{16} = 65536，2^{20}= 1048576(MB)，2^{30} = 1073741824(GB)，2^{40} = 1TB$$
6. 分数转化：注意分母是否是2的幂次 

### 0x02 **虚拟存储器和虚拟地址空间**

1. **虚拟存储器：**为了方便存储管理而提出的概念上的存储器，不能等同于物理内存
2. **虚拟地址空间：**存储器为每个字节都编写一个唯一的地址，所有可能的地址集合，被称为虚拟地址空间。**字长\(用来指明整数和指针的标称大小\)**决定虚拟地址空间的大小。
3. 区别：字表示被处理信息的单位，用来度量数据类型的宽度。

### 0x03 **字与字节**

1. 字长用来指明整数和指针的标称大小；数据通路的宽度。
2. 数据通路指CPU内部数据流经的路径以及路径上的部件，主要是CPU内部进行数据运算、存储和传送的部件，这些部件的宽度基本上要一致，才能相互匹配。因此，”字长”等于CPU内部总线的宽度、运算器的位数、通用寄存器的宽度等。
3. 字表示被处理信息的单位，用来度量数据类型的宽度。
4. 字与字长可以相同，也可不同。

### 0x04 **大端小端表示\(测试\)**

1. **小端法：LSB排在最小的地址处（与习惯反着）**
2. **大端法：MSB排在最小的地址处（与习惯相同）**
3. **按字节存储，一字节是8位\(十六进制的2位\)**
4. **指令：操作码-&gt;寄存器编号-&gt;立即数。只有立即数考虑字节顺序。**

## 数值型数据表示与处理

### **0x01 整数\(定点数\)补码**

#### 1. 补码定义

　　假设补码有n位，则 $$[X]_补 = 2^n + X( -2^n\leq X < 2^n, mod 2^n)$$ X是真值， $$[X]_补$$ 是机器数。负权表示： $$X = -2^{w-1} + \sum_{i=0}^{w-2}x_i2^i$$ 

#### 2. 转化

1. 真值转补码：一个负数的补码等于对应正数补码按位取反、末位加1（简便方法：从右到左遇到第一个1前面各位取反）
2. 补码转真值：符号为0，则为正数，数值部分相同；符号为1，则为负数，数值各位取反，末位加1.

#### 3. 补码表示带符号数的优势

1. 补码运算是模运算系统，加、减统一
2. 数0的表示唯一，方便使用
3. 比原码或反码多表示一个最小负数

#### 4. 注意

1. 补码最小值不对称，n位机器码的最小负数 $$1 00..00 (n-1个0)$$ 
2. 运算器可看作模为 $$2^n$$ 的模运算系统

## 非数值型数据表示

## 问题讨论

### 0x01 C程序中的整数

#### 1. 数据类型表示范围\(64位机器\)

| 类型名称 | 字节数 | 取值范围 |
| :---: | :---: | :---: |
| \(signed\) char | 1 | $$ -2^7(-128) $$ ~ $$2^7-1(127)$$  |
| usigned char | 1 | 0 ~ $$2^8-1(255)$$  |
| short \(int\) | 2 | $$-2^{15}(-32 768) $$ ~ $$2^{15}-1(32 767)$$  |
| usigned short | 2 | 0 ~ $$2^{16}-1(65 535)$$  |
| int | 4 | $$-2^{31}(-2 147 483 648)$$ ~ $$2^{31}-1(2 147 483 647)$$  |
| usigned int | 4 | 0 ~ $$2^{32}-1(4 294 967 295)$$  |
| long int  | 4 | $$-2^{31}(-2 147 483 648)$$ ~ $$2^{31}-1(2 147 483 647)$$  |
| usigned long | 4 | 0 ~ $$2^{32}-1(4 294 967 295)$$  |
| long long | 8 | $$-2^{63}(-9.2233720368548e+18)$$ ~ $$2^{63}-1(9.2233720368548e+18)$$  |
| usigned long long | 8 | 0 ~ $$2^{64}-1(1.844674407371e+19)$$  |









\*\*\*\*

